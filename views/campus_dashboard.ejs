<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>campus_dashboard</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm"
        crossorigin="anonymous"></script>

    <link rel="stylesheet" href="campus_dashboard.css">

</head>

<body>
    
    <div class="row">
        <div class="col">
            <div class="welcome">
                <h1 id="welcome-text">Campus dashboard</h1>
            </div>
           
                <main class="table">
                    <section class="table__header">
                        <h1>Incidents</h1>
                        <div class="input-group">
                            <input type="search" placeholder="Filter Data...">
                        </div>

                    </section>
                    <section class="table__body">
                        <table>
                            <thead>
                                <tr>
                                    <th>first Name <span class="icon-arrow">&UpArrow;</span></th>
                                    <th>last Name <span class="icon-arrow">&UpArrow;</span></th>
                                    <th>Phone Number <span class="icon-arrow">&UpArrow;</span></th>
                                    <th>Incident<span class="icon-arrow">&UpArrow;</span></th>
                                    <th>Time<span class="icon-arrow">&UpArrow;</span></th>
                                    <th>Date<span class="icon-arrow">&UpArrow;</span></th>
                                </tr>
                            </thead>
                            <tbody>
                                <% data.forEach(item=> { %>
                                    <tr>
        
                                        <td>
                                            <%= item.first_name %>
                                        </td>
                                        <td>
                                            <%= item.last_name %>
                                        </td>
                                        <td>
                                            <%= item.contact_number %>
                                        </td>
                                        <td>
                                            <%= item.feedback_message %>
                                        </td>
                                         <td>
                                            <%= item.time %>
                                        </td>
                                        <td>
                                            <%= item.date %>
                                        </td>
                                    </tr>
                                    <% }); %>
                            </tbody>
                        </table>
                    </section>
                </main>
               <div class="row">
                <div class="col-lg-3 col-md-6 col-sm-12 column">
                    <a href="/request_police">
                        <div class="options">
                            <img class="options_image" src="images\security groups.png">
                            <h4>Request Police</h4>
                        </div>
                    </a>
                </div>
                <div class="col-lg-3 col-md-6 col-sm-12 column">
                    <a href="https://drive.google.com/drive/folders/1Jz6GQvfXhT8LA8UGS2I67KCgH-zviJGE">
                        <div class="options">
                            <img class="options_image" src="images\Safety Guides.png">
                            <h4>Safety Guides</h4>
                        </div>
                    </a>
                </div>

                <div class="col-lg-3 col-md-6 col-sm-12 column">
                    <a href="#">
                        <div class="options">
                            <img class="options_image" src="images\resources.png">
                            <h4>CCTV</h4>
                        </div>
                    </a>
                </div>
                <div class="col-lg-3 col-md-6 col-sm-12 column">
                    <a href="/Counselling_service">
                        <div class="options ">
                            <img class="options_image" src="images\Counselling Services.png">
                            <h4>Counselling Services</h4>
                        </div>
                    </a>
                </div>



                
            </div>
        </div>
        
    </div>
 
       
    
    <script>
        
    const eventSource = new EventSource('/sse');

eventSource.onmessage = (event) => {
    const data = JSON.parse(event.data);

    // Create a div element for the overlay
    const overlay = document.createElement('div');
    overlay.style.position = 'fixed';
    overlay.style.top = '0';
    overlay.style.left = '0';
    overlay.style.width = '100%';
    overlay.style.height = '100%';
    overlay.style.backgroundColor = 'rgba(0, 0, 0, 0.5)';
    overlay.style.display = 'flex';
    overlay.style.justifyContent = 'center';
    overlay.style.alignItems = 'center';

    // Create a div element for the message box
    const messageBox = document.createElement('div');
    messageBox.style.background = 'white';
    messageBox.style.padding = '20px';
    messageBox.style.borderRadius = '8px';
    messageBox.style.textAlign = 'center'; // Center the text

    // Create a p element for the message
    const message = document.createElement('p');
    message.textContent = data;

    // Create a button for user interaction
    const closeButton = document.createElement('button');
    closeButton.textContent = 'OK';
    closeButton.style.marginTop = '10px'; // Add some space above the button
    closeButton.addEventListener('click', () => {
       
        location.href = location.href; // Close the overlay
    });

    // Append elements to the DOM
    messageBox.appendChild(message);
    messageBox.appendChild(closeButton);
    overlay.appendChild(messageBox);
    document.body.appendChild(overlay);
};

        </script>
    <script src="campus_dashboard.js"></script>

</body>

<footer>
 
</footer>

</html>